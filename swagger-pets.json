{
    "paths": {
        "api/user/pets": {
            "post": {
                "tags": ["User"],
                "summary": "Add User pets",
                "description": "Add User pets",
                "parameters": [],
                "security": [{ "Bearer": [] }], 
                "requestBody": {
                    "description": "Pets object",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/AddPetRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AddPetResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request (invalid request body)",
                        "content": {}
                    },
                    "401": {
                        "description": "Not authorized",
                        "content": {}
                    },
                    "403": {
                        "description": "Please provide a token, no token in authorization header",
                        "content": {}
                    }
                }
            }
            
        }, 
        "api/user/pets/:id": {
            "delete": {
                "tags": ["User"],
                "summary": "Delete User pet",
                "description": "Delete User pet",
                "parameters": [{ "name": "id", "in": "path", "description": "User pet Id", "required": true, "type": "string" }],
                "security": [{ "Bearer": [] }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RemovePetResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Not authorized",
                        "content": {}
                    },
                    "403": {
                        "description": "Please provide a token, no token in authorization header",
                        "content": {}
                    },
                    "404": {
                        "description": "Failure! pet with id: ${id} is not found",
                        "content": {}
                    }
                }
            }, 
            "patch": {
                "tags": ["User"],
                "summary": "Update user Pet Image",
                "description": "Update user Pet Image",
                "parameters": [{ "name": "id", "in": "path", "description": "User pet Id", "required": true, "type": "string" }],
                "security": [{ "Bearer": [] }],
                "requestBody": {
                    "description": "Pet image",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePetImageRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Update success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UpdatePetImageResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {}
                    },
                    "401": {
                        "description": "Not authorized",
                        "content": {}
                    },
                    "403": {
                        "description": "Please provide a token, no token in authorization header",
                        "content": {}
                    },
                    "404": {
                        "description": "Failure! pet with id: ${id} is not found",
                        "content": {}
                    }
                }
            }
        }, 
        "api/user": {
            "get": {
                "tags": ["User"],
                "summary": "Get all user info with his pets",
                "description": "Get all user info with his pets",
                "parameters": [],
                "security": [{ "Bearer": [] }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetUserInfoResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Not authorized",
                        "content": {}
                    },
                    "403": {
                        "description": "Please provide a token, no token in authorization header",
                        "content": {}
                    }
                }
            }
        }
    }, 
    "components": {
        "schemas": {

            "AddPetRequest": {
                "type": "object",
                "required": ["name", "birthdate", "breed"],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Pet name",
                        "example": "Jonny"
                    },
                    "birthdate": {
                        "type": "string",
                        "description": "Day of pet birth",
                        "example": "20.05.2020"
                    },
                    "breed": {
                        "type": "string",
                        "description": "Pet breed",
                        "example": "Turkish Angora Cat"
                    },
                    "comments": {
                        "type": "string",
                        "description": "comments",
                        "example": "My little kitten"
                    },
                    "imageURL": {
                        "type": "string",
                        "format": "binary",
                        "description": "Pet image",
                        "example": "image.jpeg"
                    }
                },
                "example": {
                    "name": "Jonny",
                    "birthday": "20.05.2020",
                    "breed": "Turkish Angora Cat",
                    "comments": "My little kitten",
                    "imageURL": "image.jpeg"
                }
            },

            "AddPetResponse": {
                "type": "object",
                "properties": {
                    "_id": {
                        "type": "string",
                        "description": "id",
                        "example": "63b548d5471bb460e28dc813"
                    },
                    "name": {
                        "type": "string",
                        "description": "Pet name",
                        "example": "Jonny"
                    },
                    "birthdate": {
                        "type": "string",
                        "description": "Day of pet birth",
                        "example": "20.05.2020"
                    },
                    "breed": {
                        "type": "string",
                        "description": "Pet breed",
                        "example": "Turkish Angora Cat"
                    },
                    "imageURL": {
                        "type": "string",
                        "description": "Pet image",
                        "example": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1672825045/acvvewo9t58ojoytnaks.jpg"
                    },
                    "comments": {
                        "type": "string",
                        "description": "comments",
                        "example": "My little kitten"
                    },
                    "owner": {
                        "type": "string",
                        "description": "Owners ID",
                        "example": "63b548d5471bb460e28dc813"
                    },
                    "createdAt": {
                        "type": "string",
                        "description": "date of creation",
                        "example": "2023-01-04T09:37:25.604Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "description": "date of update",
                        "example": "2023-01-04T09:37:25.604Z"
                    }
                },
                "example": {
                    "_id": "63b548d5471bb460e28dc813",
                    "name": "Jonny",
                    "birthday": "20.05.2020",
                    "breed": "Turkish Angora Cat",
                    "avatarURL": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1672825045/acvvewo9t58ojoytnaks.jpg",
                    "comments": "My little kitten",
                    "owner": "63b420f8613598919c6a71a8",
                    "createdAt": "2023-01-04T09:37:25.604Z",
                    "updatedAt": "2023-01-04T09:37:25.604Z"
                }
            },

            "RemovePetResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "description": "Message about delation",
                        "example": "Pet with name ${pet.name} successfully deleted"
                    },
                    "id": {
                        "type": "string",
                        "description": "pet ID",
                        "example": "63b548d5471bb460e28dc813"
                    }
                },
                "example": {
                    "message": "Pet with name Jonny successfully deleted",
                    "id": "63b548d5471bb460e28dc813"
                }
            },

            "UpdatePetImageRequest": {
                "type": "object",
                "required": ["imageURL"],
                "properties": {
                    "imageURL": {
                        "type": "string",
                        "description": "New pet image",
                        "example": "image.jpeg"
                    }
                },
                "example": {
                    "imageURL": "image.jpeg"
                }
            },

            "UpdatePetImageResponse": {
                "type": "object",
                "required": ["imageURL"],
                "properties": {
                    "message": {
                        "type": "string",
                        "description": "Message about update",
                        "example": "Your pet ${pet.name} image successfully updated"
                    },
                    "imageURL": {
                        "type": "string",
                        "description": "Image URL from Cloudinary",
                        "example": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1672825045/acvvewo9t58ojoytnaks.jpg"
                    }
                },
                "example": {
                    "message": "Your pet Jonny image successfully updated",
                    "imageURL": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1672825045/acvvewo9t58ojoytnaks.jpg"
                }
            },

            "GetUserInfoResponse": {
                "type": "object",
                "properties": {
                    "user": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "string",
                                "description": "user ID",
                                "example": "63b548d5471bb460e28dc813"
                            },
                            "avatarURL": {
                                "type": "string",
                                "description": "User avatar",
                                "example": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1672825045/acvvewo9t58ojoytnaks.jpg"
                            },
                            "userPets": {
                                "type": "array",
                                "items": {
                                    "properties": {
                                        "_id": {
                                            "type": "string",
                                            "description": "pet ID",
                                            "example": "63b548d5471bb460e28dc813"
                                        },
                                        "name": {
                                            "type": "string",
                                            "description": "Pet name",
                                            "example": "Jonny"
                                        },
                                        "birthdate": {
                                            "type": "string",
                                            "description": "Day of pet birth",
                                            "example": "20.05.2020"
                                        },
                                        "breed": {
                                            "type": "string",
                                            "description": "Pet breed",
                                            "example": "Turkish Angora Cat"
                                        },
                                        "imageURL": {
                                            "type": "string",
                                            "description": "image your pet",
                                            "example": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1672825045/acvvewo9t58ojoytnaks.jpg"
                                        },
                                        "comments": {
                                            "type": "string",
                                            "description": "comments",
                                            "example": "My little kitten"
                                        },
                                        "owner": {
                                            "type": "string",
                                            "description": "Owners ID",
                                            "example": "63b548d5471bb460e28dc813"
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "description": "date of creation",
                                            "example": "2023-01-04T09:37:25.604Z"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "description": "date of update",
                                            "example": "2023-01-04T09:37:25.604Z"
                                        }
                                    }
                                }
                            },
                            "userInfo": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "User name",
                                        "example": "Kris"
                                    },
                                    "email": {
                                        "type": "string",
                                        "description": "User email",
                                        "example": "test@gmail.com"
                                    },
                                    "city": {
                                        "type": "string",
                                        "description": "User city",
                                        "example": "Kyiv, Ukraine"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "description": "User phone number",
                                        "example": "+380931234567"
                                    },
                                    "birthday": {
                                        "type": "string",
                                        "description": "User birthday",
                                        "example": "00.00.0000"
                                    }
                                }
                            }
                        }
                    }
                },
                "example": {
                    "user": {
                        "_id": "63b548d5471bb460e28dc813",
                        "avatarURL": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1673004097/qplslyemyc1eo8qu7jb0.jpg",
                        "userPets": [
                            {
                                "_id": "63b53c929165e3aafa203876",
                                "name": "Jonny",
                                "birthday": "20.05.2020",
                                "breed": "Turkish Angora Cat",
                                "avatarURL": "https://res.cloudinary.com/dsrjlhmr8/image/upload/v1673004097/qplslyemyc1eo8qu7jb0.jpg",
                                "comments": "My little kitten",
                                "owner": "63b548d5471bb460e28dc813",
                                "createdAt": "2023-01-04T08:45:06.436Z",
                                "updatedAt": "2023-01-04T08:45:06.436Z"
                            }
                        ],
                        "userInfo": {
                            "name": "Kris",
                            "email": "test@gmail.com",
                            "city": "Kyiv, Ukraine",
                            "phone": "+380931234567",
                            "birthday": "00.00.0000"
                        }
                    }
                }
            }
        }
    }
}